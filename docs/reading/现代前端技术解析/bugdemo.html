<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  
</head>
<body>
  <script src="fdsd2.js"></script>
  <img src="./sdf.png" alt="">
  <script>
    // 可以得到具体的异常信息、异常文件的URL、异常的行号与列号及异常的堆栈信息，再捕获异常后，统一上报至我们的日志服务器。
    // window.onerror = function(errorMessage, scriptURI, lineNo, columnNo, error) {
    //   console.log('errorMessage: ' + errorMessage); // 异常信息
    //   console.log('scriptURI: ' + scriptURI); // 异常文件路径
    //   console.log('lineNo: ' + lineNo); // 异常行号
    //   console.log('columnNo: ' + columnNo); // 异常列号
    //   console.log('error: ' + error); // 异常堆栈信息
    //   // ...
    //   // 异常上报
    // };
    // 捕获Promise 和async/await,将异常交给error 统一处理
    window.addEventListener('unhandledrejection', e=> {
      throw e.reason
    })
    window.addEventListener('error',ErrorEvent => {
      console.log(ErrorEvent)
        console.log('errorMessage: ' + ErrorEvent.message); // 异常信息
        console.log('scriptURI: ' + ErrorEvent.filename); // 异常文件路径
        console.log('lineNo: ' + ErrorEvent.lineno); // 异常行号
        console.log('columnNo: ' + ErrorEvent.colno); // 异常列号
        console.log('error: ' + ErrorEvent.error); // 异常堆栈信息
      // ...
      // 异常上报
      }, true
    
    )
    throw new Error('这是一个错误');
    // 
  </script>
  <script src="fdsd3.js"></script>
</body>
</html>